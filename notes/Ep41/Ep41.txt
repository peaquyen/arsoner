Since scripts can now hold multiple functions, most of the code in your giant switch statement can (should) be pulled out into other functions in the script. This would eliminate the complexity of figuring out closing brackets, and just generally make the code much easier to read. For example, in the "case HOOKSTATUS.PULLTOENTITY", just call a function named "pullToEntity()". Or your "default: // Not cookable entity" block can moved to a function "notHookableEntity()". Then your huge switch becomes nice and compact and easy to follow, with no nested switches or other logic, and each function will be easy to reason about on its own .

 If only PHP replaced its constants like how GameMaker replaces macros. Instead, constants are somehow slower than strings there. Yes, seriously. A 2 dimensional array with name, age, location for example  would be faster with those strings in every single array value and also use less memory somehow, than using constants for those values, so the array turns into 0, 1, 2, which should be faster.  